webpackJsonp([12],{Q6oD:function(i,t){},b72d:function(i,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("mvHQ"),s=a.n(e),l={name:"ipSection",data:function(){var i=this;return{columnsData:[{title:"机房名称",key:"idc_ip_list_name"},{title:"IP段",key:"idc_ip_list_ip"},{title:"开始地址",key:"idc_ip_list_start"},{title:"结束地址",key:"idc_ip_list_end"},{title:"防护值 （单位：mb/s）",key:"idc_ip_list_bps",width:170},{title:"牵引时间 (单位：分钟)",key:"idc_ip_list_tow_time",width:170},{title:"操作",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.modifierShow(a)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){i.delShow(a)}}},"删除")])}}],ipsData:[],idcName:"",ip:"",idcList:[],buildShow:!1,buildData:{ip:"",idcIpBps:"",time:"",idcName:"",ipStart:"",ipEnd:""},midifiShow:!1,modifierData:{idcIpBps:"",time:""},originData:{},delConfirm:!1,delData:{},allData:[],pageNum:"",pageShow:!1}},mounted:function(){this.getIdcData()},methods:{getIdcData:function(){var i=this;this.$post("/webapi/public",{key:"idc_root"}).then(function(t){t.forEach(function(t,a){i.idcList.push(t)})}).catch(function(i){console.log(i)})},getShowData:function(i){var t=this;this.$post("/webapi/ipfwset",{key:"ipsshow",content:i}).then(function(i){t.ipsData=[],t.allData=[],"{}"!==s()(i)&&i.forEach(function(i,a){t.ipsData.push(i),t.allData.push(i)}),i.length>10?(t.pageNum=i.length,t.pageShow=!0,t.ipsData=t.allData.slice(0,10)):i.length<=10&&(t.pageShow=!1)}).catch(function(i){console.log(i)})},ipQuery:function(){var i={};if(""===this.idcName&&""===this.ip)return alert("请输入机房名称或IP地址"),!0;if(""!==this.idcName)for(var t=0;t<this.idcList.length;t++)this.idcName===this.idcList[t].idc_name&&(i.idc_id=this.idcList[t].id);else i.idc_id=1;""!==this.ip?i.idc_ip_list_ip=this.ip:i.idc_ip_list_ip="";var a=s()(i);this.getShowData(a)},bulidIp:function(){this.buildShow=!0},buildCancel:function(){this.buildData.ip="",this.buildData.idcIpBps="",this.buildData.time="",this.buildData.idcName="",this.buildData.ipStart="",this.buildData.ipEnd=""},submitData:function(){var i=this,t={};if(""===this.buildData.idcName||""===this.buildData.ip||""===this.buildData.idcIpBps||""===this.buildData.time||""===this.buildData.ipStart||""===this.buildData.ipEnd)return alert("请填写完整资料！"),!0;t.ip_list=this.buildData.ip,t.idc_root_name=this.buildData.idcName,t.idc_ip_tow_time=this.buildData.time,t.idc_ip_bps=this.buildData.idcIpBps,t.idc_ip_start=this.buildData.ipStart,t.idc_ip_end=this.buildData.ipEnd;for(var a=0;a<this.idcList.length;a++)this.buildData.idcName===this.idcList[a].idc_name&&(t.idc_id=this.idcList[a].id);var e=s()(t);this.$post("/webapi/ipfwset",{key:"ipsadd",content:e}).then(function(t){403===t[1]?alert(t[2]):200===t[1]&&(i.$Message.info("提交成功！"),i.buildCancel(),i.buildShow=!1,""!==i.idcName&&i.ipQuery())}).catch(function(t){i.$Message.info("提交失败"+t)})},modifierShow:function(i){this.originData=i.row,console.log(i),this.midifiShow=!0},modifierCancel:function(){this.modifierData.idcIpBps="",this.modifierData.time=""},submitModifierData:function(){var i=this,t={};if(""===this.modifierData.time&&""===this.modifierData.idcIpBps)return alert("请修改后再提交！"),!0;""!==this.modifierData.time?t.idc_time=this.modifierData.time:t.idc_time=this.originData.idc_ip_list_tow_time,""!==this.modifierData.idcIpBps?t.idc_ip_bps=this.modifierData.idcIpBps:t.idc_ip_bps=this.originData.idc_ip_list_bps,t.ip=this.originData.idc_ip,t.id=this.originData.id;var a=s()(t);this.$post("/webapi/ipfwset",{key:"ipsupdate",content:a}).then(function(t){403===t[1]?alert(t[2]):200===t[1]&&(i.$Message.info("修改成功"),i.modifierCancel(),i.midifiShow=!1,i.ipQuery())}).catch(function(t){i.$Message.info("修改失败"+t)})},delShow:function(i){this.delConfirm=!0,this.delData=i.row},confirmDel:function(){var i=this,t=this.delData.id;this.$post("/webapi/ipfwset",{key:"ipsdel",id:t}).then(function(t){i.$Message.info("删除成功！"),i.delConfirm=!1,i.ipQuery()}).catch(function(t){i.$Message.info("删除失败"+t)})},pageChange:function(i){this.ipsData=this.allData.slice(10*(i-1),10*i)}}},o={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("div",{staticClass:"ipSection-container"},[a("div",{staticClass:"build"},[a("Button",{attrs:{type:"primary",icon:"ios-plus-empty"},on:{click:i.bulidIp}},[i._v("IP段新建")])],1),i._v(" "),a("div",{staticClass:"query"},[a("div",{staticClass:"query-idcName"},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择机房"},model:{value:i.idcName,callback:function(t){i.idcName=t},expression:"idcName"}},i._l(i.idcList,function(t,e){return a("Option",{key:e,attrs:{value:t.idc_name}},[i._v(i._s(t.idc_name))])}))],1),i._v(" "),a("div",{staticClass:"query-ip"},[a("i-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入IP段"},model:{value:i.ip,callback:function(t){i.ip=t},expression:"ip"}}),i._v(" "),a("div",{staticClass:"but"},[a("Button",{attrs:{type:"primary"},on:{click:i.ipQuery}},[i._v("查询")])],1)],1)]),i._v(" "),a("div",{staticClass:"table"},[a("i-table",{attrs:{columns:i.columnsData,data:i.ipsData}})],1),i._v(" "),a("div",{staticClass:"modal"},[a("Modal",{attrs:{title:"新建IP段"},on:{"on-cancel":i.buildCancel},model:{value:i.buildShow,callback:function(t){i.buildShow=t},expression:"buildShow"}},[a("div",{staticClass:"text"},[a("div",{staticClass:"item"},[a("label",[i._v("IP段 （IP前三位地址）")]),i._v(" "),a("i-input",{attrs:{placeholder:"请输入IP地址"},model:{value:i.buildData.ip,callback:function(t){i.$set(i.buildData,"ip",t)},expression:"buildData.ip"}})],1),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("开始地址")]),i._v(" "),a("i-input",{attrs:{placeholder:"请输入开始地址"},model:{value:i.buildData.ipStart,callback:function(t){i.$set(i.buildData,"ipStart",t)},expression:"buildData.ipStart"}})],1),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("结束地址")]),i._v(" "),a("i-input",{attrs:{placeholder:"请输入结束地址"},model:{value:i.buildData.ipEnd,callback:function(t){i.$set(i.buildData,"ipEnd",t)},expression:"buildData.ipEnd"}})],1),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("IP防护值 (单位： mb/s)")]),i._v(" "),a("i-input",{attrs:{placeholder:"请输入IP防护值"},model:{value:i.buildData.idcIpBps,callback:function(t){i.$set(i.buildData,"idcIpBps",t)},expression:"buildData.idcIpBps"}})],1),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("IP牵引时间 (单位： 分钟)")]),i._v(" "),a("i-input",{attrs:{placeholder:"请输入IP牵引时间"},model:{value:i.buildData.time,callback:function(t){i.$set(i.buildData,"time",t)},expression:"buildData.time"}})],1),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("机房名称："+i._s(i.buildData.idcName))]),i._v(" "),a("Select",{staticStyle:{width:"100%",display:"block"},attrs:{placeholder:"请选择机房"},model:{value:i.buildData.idcName,callback:function(t){i.$set(i.buildData,"idcName",t)},expression:"buildData.idcName"}},i._l(i.idcList,function(t,e){return a("Option",{key:e,attrs:{value:t.idc_name}},[i._v(i._s(t.idc_name))])}))],1)]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:i.buildCancel}},[i._v("重置")]),i._v(" "),a("Button",{attrs:{primary:"default"},on:{click:i.submitData}},[i._v("提交")])],1)]),i._v(" "),a("Modal",{attrs:{title:"修改IP段"},on:{"on-cancel":i.modifierCancel},model:{value:i.midifiShow,callback:function(t){i.midifiShow=t},expression:"midifiShow"}},[a("div",{staticClass:"text"},[a("div",{staticClass:"item"},[a("label",[i._v("IP段防护值 (单位： mb/s)")]),i._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.modifierData.idcIpBps,expression:"modifierData.idcIpBps"}],staticClass:"inp",attrs:{placeholder:i.originData.idc_ip_list_bps},domProps:{value:i.modifierData.idcIpBps},on:{input:function(t){t.target.composing||i.$set(i.modifierData,"idcIpBps",t.target.value)}}})]),i._v(" "),a("div",{staticClass:"item"},[a("label",[i._v("牵引时间 (单位： 分钟)")]),i._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:i.modifierData.time,expression:"modifierData.time"}],staticClass:"inp",attrs:{placeholder:i.originData.idc_ip_list_tow_time},domProps:{value:i.modifierData.time},on:{input:function(t){t.target.composing||i.$set(i.modifierData,"time",t.target.value)}}})])]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:i.modifierCancel}},[i._v("重置")]),i._v(" "),a("Button",{attrs:{type:"primary"},on:{click:i.submitModifierData}},[i._v("提交")])],1)]),i._v(" "),a("Modal",{attrs:{width:"360"},model:{value:i.delConfirm,callback:function(t){i.delConfirm=t},expression:"delConfirm"}},[a("p",{staticStyle:{color:"rgb(255, 102, 0)","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),i._v(" "),a("span",[i._v("删除确认")])],1),i._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("p",[i._v("该ip段一经删除，无法恢复")])]),i._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:""},on:{click:i.confirmDel}},[i._v("删除")])],1)])],1),i._v(" "),a("div",{staticClass:"page"},[i.pageShow?a("Page",{attrs:{total:i.pageNum,"show-elevator":""},on:{"on-change":i.pageChange}}):i._e()],1)])},staticRenderFns:[]};var d=a("VU/8")(l,o,!1,function(i){a("Q6oD")},"data-v-616cb8cf",null);t.default=d.exports}});
//# sourceMappingURL=12.a485757073b25f839ead.js.map