{"version":3,"sources":["webpack:///src/components/template-admin/templateAdmin2.vue","webpack:///./src/components/template-admin/templateAdmin2.vue?40ea","webpack:///./src/components/template-admin/templateAdmin2.vue"],"names":["templateAdmin2","name","data","_this","this","columnsData","title","key","width","align","render","h","params","props","type","size","disabled","levelMess","style","marginRight","on","click","modifierTemplate","delTem","temData","originData","modalData","modifierData","modifierTemplateShow","flag","temName","temRemarks","optionTem","delConfirm","delInd","modifierInd","mounted","levelObj","undefined","$store","state","userLevel","i","$route","temShow","computed","a","watch","handler","val","methods","item","ind","index","tem_level","util","evil","modifierSubmit","_this2","submitData","submitTemData","subBol","changeTemText","submitDataChart","stringify_default","initModal","$post","content","id","then","res","console","log","$Message","info","catch","err","window","alert","modifierCancel","bulidTemplate","getBuildTem","_this3","buildDefaultData","chartToBol","submitBuildTemData","_this4","buiBol","chart","buildCancel","setTimeout","remarks","refName","jsonReplace","replace","submitObj","tem_name","tem_remarks","changeCurrentValue","level","$refs","param","confirmDel","_this5","delData","_this6","length","obj","push","unChangeData","changeData","unChangeTemName","unChangeTemRemarks","changeDataTemNane","changeDataTemRemarks","changeValue","template_admin_templateAdmin2","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","_v","columns","on-ok","on-cancel","model","value","callback","$$v","expression","placeholder","accordion","slot","_l","items","_s","list","ref","refInFor","staticStyle","color","text-align","long","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.a4a86b85839bd1705ca6.js","sourcesContent":["<template>\n  <div class=\"tem-container\">\n    <div class=\"build-tem\">\n      <Button type=\"primary\" icon=\"ios-plus-empty\" @click=\"bulidTemplate\" :disabled=\"!levelMess['新建']\">添加模板</Button>\n    </div>\n    <div class=\"table\">\n      <i-table :columns=\"columnsData\" :data=\"temData\"></i-table>\n    </div>\n    <div class=\"modal\">\n      <Modal v-model=\"flag\" :title=\"optionTem\" @on-ok=\"submitBuildTemData\" @on-cancel=\"buildCancel\">\n        <div class=\"tem-con\">\n          <div class=\"tem-name\">\n            <label>模板名字：</label>\n            <i-input :placeholder = \"modalData.tem_name\" v-model=\"temName\"></i-input>\n          </div>\n          <div class=\"tem-remarks\">\n            <label>模板备注：</label>\n            <i-input :placeholder = \"modalData.tem_remarks\" v-model=\"temRemarks\"></i-input>\n          </div>\n          <div class=\"tem-access-tem\">\n            <Collapse accordion>\n              <Panel name=\"tem_level\">\n                <span>权限模板</span>\n                <div slot=\"content\">\n                  <Collapse accordion>\n                    <Panel v-for=\"(items, val, index) in modalData.tem_level\"  :key=\"val\" :name=\"val\">\n                      <span>{{val}}</span>\n                      <div slot=\"content\" v-for=\"(list, name) in items\" :key=\"name\" class=\"access-list\">\n                        <p class=\"access-text\">{{name}}</p>\n                        <Checkbox  class=\"checkbox\" :ref=\" 'build' + name + index\" :value=\"list\"></Checkbox>\n                      </div>\n                    </Panel>\n                  </Collapse>\n                </div>\n              </Panel>\n            </Collapse>\n          </div>\n        </div>\n        <div slot=\"footer\">\n          <Button @click=\"buildCancel\">重置</Button>\n          <Button type=\"primary\" @click=\"submitBuildTemData\">提交</Button>\n        </div>\n      </Modal>\n      <Modal v-model=\"modifierTemplateShow\" title=\"修改模板\" @on-cancel=\"modifierCancel\" @on-ok=\"modifierSubmit\">\n          <div class=\"tem-con\">\n            <p>\n              <label>模板名字：</label>\n              <i-input :placeholder = \"modifierData.tem_name\" v-model=\"temName\"></i-input>\n            </p>\n            <p>\n              <label>模板备注：</label>\n              <i-input :placeholder = \"modifierData.tem_remarks\" v-model=\"temRemarks\"></i-input>\n            </p>\n            <div class=\"tem-access-tem\">\n              <Collapse accordion>\n                <Panel name=\"tem_level\">\n                  <span>权限模板</span>\n                  <div slot=\"content\">\n                    <Collapse accordion>\n                      <Panel v-for=\"(items, val, index) in modifierData.tem_level\"  :key=\"val\" :name=\"val\">\n                        <span>{{val}}</span>\n                        <div slot=\"content\" v-for=\"(list, name) in items\" :key=\"name\" class=\"access-list\">\n                          <p class=\"access-text\">{{name}}</p>\n                          <Checkbox  class=\"checkbox\" :ref=\" 'modifi' + name + index\" :value=\"list\"></Checkbox>\n                        </div>\n                      </Panel>\n                    </Collapse>\n                  </div>\n                </Panel>\n              </Collapse>\n            </div>\n          </div>\n      </Modal>\n      <Modal v-model=\"delConfirm\" width=\"360\">\n        <p slot=\"header\" style=\"color: rgb(255, 102, 0);text-align: center\">\n          <Icon type=\"information-circled\"></Icon>\n          <span>删除确认</span>\n        </p>\n        <div style=\"text-align: center\">\n          <p>该用户一经删除，无法恢复</p>\n        </div>\n        <div slot=\"footer\">\n          <Button type=\"error\" size=\"large\" long @click=\"confirmDel\">删除</Button>\n        </div>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport util from '../.././util/index'\nexport default {\n  name: 'templateAdmin2',\n  data () {\n    return {\n      columnsData: [\n        {\n          title: '模板名称',\n          key: 'tem_name'\n        },\n        {\n          title: '备注',\n          key: 'tem_remarks'\n        },\n        {\n          title: '操作',\n          key: 'option',\n          width: 150,\n          align: 'center',\n          render: (h, params) => {\n            return h('div', [\n              h('Button', {\n                props: {\n                  type: 'primary',\n                  size: 'small',\n                  disabled: !this.levelMess['修改']\n                },\n                style: {\n                  marginRight: '5px'\n                },\n                on: {\n                  click: () => {\n                    this.modifierTemplate(params)\n                  }\n                }\n              }, '修改'),\n              h('Button', {\n                props: {\n                  type: 'error',\n                  size: 'small',\n                  disabled: !this.levelMess['删除']\n                },\n                on: {\n                  click: () => {\n                    this.delTem(params)\n                  }\n                }\n              }, '删除')\n            ])\n          }\n        }\n      ],\n      temData: [], // 表格渲染数据\n      originData: {}, //  初始数据，当修改或删除数据时，可通过该数据找到对应的数据，进行相关操作\n      modalData: {}, //  新建模板的数据，根据该数据，渲染新建模板的视图\n      modifierData: {}, // 修改模板的数据，根据该数据，渲染修改模板的视图，该数据来源于originData\n      modifierTemplateShow: false, //  修改对话框的弹出与隐藏\n      flag: false, //  新建模板对话框弹出与隐藏\n      temName: '', // 模板名字\n      temRemarks: '', //  模板备注\n      optionTem: '', // 对话框title\n      delConfirm: false, //  删除对话框弹出\n      delInd: '', //  删除模板的索引\n      modifierInd: '', //  修改模板的索引\n      levelMess: {}\n    }\n  },\n  mounted () {\n    let levelObj = {}\n    levelObj = this.$store.state.userLevel\n    if (levelObj !== undefined) {\n      for (let i in levelObj) {\n        if (i === this.$route.name) {\n          this.levelMess = levelObj[i]\n        }\n      }\n    }\n    this.temShow()\n  },\n  computed: {\n    a () {\n      return this.$store.state.userLevel\n    }\n  },\n  watch: {\n    a: {\n      handler: function (val) {\n        for (let i in val) {\n          if (i === this.$route.name) {\n            this.levelMess = val[i]\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    // 修改权限模板\n    modifierTemplate (item) {\n      this.modifierTemplateShow = true\n      let ind = item.index\n      let modifierData = this.originData[ind]\n      if (typeof modifierData.tem_level === 'string') {\n        modifierData.tem_level = util.evil(modifierData.tem_level)\n      }\n      // util.chartToBol(modifierData.tem_level)\n      this.modifierData = modifierData\n    },\n    // 提交修改后的权限模板信息\n    modifierSubmit () {\n      let submitData = this.submitTemData(this.modifierData, this.temName, this.temRemarks, 'modifi')\n      let subBol = this.changeTemText(this.modifierData, submitData)\n      let submitDataChart = JSON.stringify(submitData)\n      this.initModal()\n      this.modifierData = {}\n      if (subBol) {\n        this.$post('/webapi/template', {key: 'update', content: submitDataChart, id: submitData.id})\n          .then(res => {\n            console.log(res)\n            this.$Message.info('修改成功')\n            this.temShow()\n          })\n          .catch(err => {\n            console.log(err)\n            this.$Message.info('修改失败 &nbsp;' + err)\n          })\n      } else {\n        window.alert('模板信息没有更改，请更改后再确认！')\n      }\n    },\n    // 关闭模板时清空模板数据\n    modifierCancel () {\n      this.initModal()\n      this.modifierData = {}\n    },\n    // 新建模板\n    bulidTemplate () {\n      this.initModal()\n      this.flag = true\n      this.modalData = {}\n      this.optionTem = '新建模板'\n      this.getBuildTem()\n    },\n    getBuildTem () {\n      this.$post('/webapi/template', {key: 'get_default_tem', content: 'default'})\n        .then(res => {\n          let buildDefaultData = res\n          buildDefaultData[0].tem_level = util.evil(buildDefaultData[0].tem_level)\n          util.chartToBol(buildDefaultData[0].tem_level)\n          this.modalData = buildDefaultData[0]\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    // 提交新建模板\n    submitBuildTemData () {\n      let submitData = this.submitTemData(this.modalData, this.temName, this.temRemarks, 'build')\n      let buiBol = this.changeTemText(this.modalData, submitData)\n      this.modalData = {}\n      let chart = JSON.stringify(submitData)\n      if (buiBol) {\n        this.$post('/webapi/template', {key: 'add', content: chart})\n          .then(res => {\n            this.$Message.info('提交成功')\n            this.temShow()\n            this.modalData = {}\n            this.buildCancel()\n            this.flag = false\n          })\n          .catch(err => {\n            setTimeout(() => {\n              this.$Message.info('提交失败：' + err)\n            }, 1000)\n            this.modalData = {}\n          })\n      } else {\n        window.alert('模板信息没有更改，请更改后提交')\n      }\n    },\n    // 模板信息处理\n    submitTemData (submitData, name, remarks, refName) {\n      let jsonReplace = JSON.stringify(submitData).replace(/tem_level/g, 'level')\n      let submitObj = util.evil(jsonReplace)\n      if (name === '') {\n        name = submitData.tem_name\n      }\n      if (remarks === '') {\n        remarks = submitData.tem_remarks\n      }\n      submitObj.tem_name = name\n      submitObj.tem_remarks = remarks\n      util.changeCurrentValue(submitObj.level, this.$refs, refName)\n      return submitObj\n    },\n    // 新建模板关闭\n    buildCancel () {\n      this.initModal()\n      this.modalData = {}\n      this.getBuildTem()\n    },\n    // 删除模板\n    delTem (param) {\n      this.delConfirm = true\n      this.delInd = param.index\n    },\n    confirmDel () {\n      let delData = this.originData[this.delInd]\n      this.$post('/webapi/template', {key: 'del', id: delData.id})\n        .then(res => {\n          this.$Message.info('删除成功')\n          this.temShow()\n          this.delConfirm = false\n        })\n        .catch(err => {\n          console.log(err)\n          this.$Message.info('删除失败：&nbsp;' + err)\n          this.delConfirm = false\n        })\n    },\n    // 初始化模板\n    initModal () {\n      this.temName = ''\n      this.temRemarks = ''\n    },\n    temShow () {\n      // 模板查看\n      this.$post('/webapi/template', {key: 'show'})\n        .then(res => {\n          this.temData = []\n          this.originData = res\n          for (let i = 0; i < res.length; i++) {\n            let obj = {\n              tem_name: '',\n              tem_remarks: ''\n            }\n            obj.tem_name = res[i].tem_name\n            obj.tem_remarks = res[i].tem_remarks\n            this.temData.push(obj)\n          }\n        })\n    },\n    // 模板中的信息是否更改\n    changeTemText (unChangeData, changeData) {\n      let unChangeTemName = unChangeData.tem_name\n      let unChangeTemRemarks = unChangeData.tem_remarks\n      let changeDataTemNane = changeData.tem_name\n      let changeDataTemRemarks = changeData.tem_remarks\n      let changeFlag = false\n      if (unChangeTemName !== changeDataTemNane || unChangeTemRemarks !== changeDataTemRemarks) {\n        changeFlag = true\n        return changeFlag\n      }\n      changeFlag = util.changeValue(unChangeData.tem_level, changeData.level)\n      return changeFlag\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .tem-container{\n    width: 100%;\n    padding: 14px 16px;\n  }\n  .tem-container .build-tem{\n    margin: 0px 0 10px 0;\n  }\n  .tem-con label{\n    display: inline-block;\n    margin: 10px 0 8px;\n    font-size: 12px;\n    line-height: 20px;\n  }\n  .tem-access-tem{\n    margin-top: 15px;\n  }\n  .tem-access-tem .access-list{\n    height: 40px;\n    line-height: 40px;\n    border-bottom: 1px solid rgba(0, 0, 0, .2);\n  }\n  .tem-access-tem .access-list:last-child{\n    border: none;\n  }\n  .tem-access-tem .access-text{\n    display: inline-block;\n    font-size: 12px;\n    line-height: 40px;\n    color: #2d8cf0\n  }\n  .tem-access-tem .checkbox{\n    float: right;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/template-admin/templateAdmin2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tem-container\"},[_c('div',{staticClass:\"build-tem\"},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-plus-empty\",\"disabled\":!_vm.levelMess['新建']},on:{\"click\":_vm.bulidTemplate}},[_vm._v(\"添加模板\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('i-table',{attrs:{\"columns\":_vm.columnsData,\"data\":_vm.temData}})],1),_vm._v(\" \"),_c('div',{staticClass:\"modal\"},[_c('Modal',{attrs:{\"title\":_vm.optionTem},on:{\"on-ok\":_vm.submitBuildTemData,\"on-cancel\":_vm.buildCancel},model:{value:(_vm.flag),callback:function ($$v) {_vm.flag=$$v},expression:\"flag\"}},[_c('div',{staticClass:\"tem-con\"},[_c('div',{staticClass:\"tem-name\"},[_c('label',[_vm._v(\"模板名字：\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":_vm.modalData.tem_name},model:{value:(_vm.temName),callback:function ($$v) {_vm.temName=$$v},expression:\"temName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tem-remarks\"},[_c('label',[_vm._v(\"模板备注：\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":_vm.modalData.tem_remarks},model:{value:(_vm.temRemarks),callback:function ($$v) {_vm.temRemarks=$$v},expression:\"temRemarks\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tem-access-tem\"},[_c('Collapse',{attrs:{\"accordion\":\"\"}},[_c('Panel',{attrs:{\"name\":\"tem_level\"}},[_c('span',[_vm._v(\"权限模板\")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Collapse',{attrs:{\"accordion\":\"\"}},_vm._l((_vm.modalData.tem_level),function(items,val,index){return _c('Panel',{key:val,attrs:{\"name\":val}},[_c('span',[_vm._v(_vm._s(val))]),_vm._v(\" \"),_vm._l((items),function(list,name){return _c('div',{key:name,staticClass:\"access-list\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('p',{staticClass:\"access-text\"},[_vm._v(_vm._s(name))]),_vm._v(\" \"),_c('Checkbox',{ref:'build' + name + index,refInFor:true,staticClass:\"checkbox\",attrs:{\"value\":list}})],1)})],2)}))],1)])],1)],1)]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{on:{\"click\":_vm.buildCancel}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitBuildTemData}},[_vm._v(\"提交\")])],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"修改模板\"},on:{\"on-cancel\":_vm.modifierCancel,\"on-ok\":_vm.modifierSubmit},model:{value:(_vm.modifierTemplateShow),callback:function ($$v) {_vm.modifierTemplateShow=$$v},expression:\"modifierTemplateShow\"}},[_c('div',{staticClass:\"tem-con\"},[_c('p',[_c('label',[_vm._v(\"模板名字：\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":_vm.modifierData.tem_name},model:{value:(_vm.temName),callback:function ($$v) {_vm.temName=$$v},expression:\"temName\"}})],1),_vm._v(\" \"),_c('p',[_c('label',[_vm._v(\"模板备注：\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":_vm.modifierData.tem_remarks},model:{value:(_vm.temRemarks),callback:function ($$v) {_vm.temRemarks=$$v},expression:\"temRemarks\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"tem-access-tem\"},[_c('Collapse',{attrs:{\"accordion\":\"\"}},[_c('Panel',{attrs:{\"name\":\"tem_level\"}},[_c('span',[_vm._v(\"权限模板\")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Collapse',{attrs:{\"accordion\":\"\"}},_vm._l((_vm.modifierData.tem_level),function(items,val,index){return _c('Panel',{key:val,attrs:{\"name\":val}},[_c('span',[_vm._v(_vm._s(val))]),_vm._v(\" \"),_vm._l((items),function(list,name){return _c('div',{key:name,staticClass:\"access-list\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('p',{staticClass:\"access-text\"},[_vm._v(_vm._s(name))]),_vm._v(\" \"),_c('Checkbox',{ref:'modifi' + name + index,refInFor:true,staticClass:\"checkbox\",attrs:{\"value\":list}})],1)})],2)}))],1)])],1)],1)])]),_vm._v(\" \"),_c('Modal',{attrs:{\"width\":\"360\"},model:{value:(_vm.delConfirm),callback:function ($$v) {_vm.delConfirm=$$v},expression:\"delConfirm\"}},[_c('p',{staticStyle:{\"color\":\"rgb(255, 102, 0)\",\"text-align\":\"center\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('Icon',{attrs:{\"type\":\"information-circled\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"删除确认\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',[_vm._v(\"该用户一经删除，无法恢复\")])]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"error\",\"size\":\"large\",\"long\":\"\"},on:{\"click\":_vm.confirmDel}},[_vm._v(\"删除\")])],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-74da5dba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/template-admin/templateAdmin2.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-74da5dba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./templateAdmin2.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./templateAdmin2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./templateAdmin2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-74da5dba\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./templateAdmin2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-74da5dba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/template-admin/templateAdmin2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}