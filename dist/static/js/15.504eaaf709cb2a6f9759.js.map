{"version":3,"sources":["webpack:///src/components/maunal-admin/maunalAdmin.vue","webpack:///./src/components/maunal-admin/maunalAdmin.vue?2d00","webpack:///./src/components/maunal-admin/maunalAdmin.vue"],"names":["maunalAdmin","name","data","_this","this","columnsData","title","key","width","align","render","h","params","props","type","size","disabled","levelMess","on","click","confirmClick","idcData","idc_name","id","buildIpShow","buildData","ip","remarks","buildInd","addData","queryIp","idcName","pageNum","pageShow","originData","confirmShow","confirmInd","inter","mounted","levelObj","_this2","undefined","$store","state","userLevel","i","$route","getData","getIpData","setInterval","methods","_this3","$post","then","res","stringify_default","forEach","item","index","push","catch","err","console","log","_this4","obj","length","root_id","chart","content","slice","buildClick","buildIpCancel","choseIdc","confirmDec","_this5","$Message","info","subBuildIp","_this6","ipArr","alert","test","split","join","Query","util","regIp","pageChange","num","inpFocus","clearInterval","inpBlur","_this7","hisQuery","_this8","computed","a","watch","to","from","handler","val","maunal_admin_maunalAdmin","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","_v","staticStyle","placeholder","model","value","callback","$$v","expression","_l","_s","on-focus","on-blur","columns","on-cancel","margin-bottom","$set","slot","color","text-align","long","total","show-elevator","on-change","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.504eaaf709cb2a6f9759.js","sourcesContent":["<template>\n  <div class=\"maunal-container\">\n    <div class=\"manual-build\">\n      <Button type=\"primary\" icon=\"ios-plus-empty\" @click=\"buildClick\" :disabled=\"!levelMess['新建']\">新建封停ip</Button>\n    </div>\n    <div class=\"query\">\n      <div class=\"query-idc\">\n        <Select v-model=\"idcName\" style=\"width:200px\" placeholder=\"请选择机房名称\">\n          <Option v-for=\"(item,index) in idcData\" :value=\"item.idc_name\" :key=\"index\">{{ item.idc_name }}</Option>\n        </Select>\n      </div>\n      <div class=\"query-ip\">\n        <i-input v-model=\"queryIp\" @on-focus=\"inpFocus\" @on-blur=\"inpBlur\" placeholder=\"请输入查询ip\" style=\"width: 200px\"></i-input>\n      </div>\n      <div class=\"query-btn\">\n        <Button type=\"primary\" @click=\"Query\">查询</Button>\n      </div>\n      <div class=\"history\">\n        <Button type=\"primary\" @click=\"hisQuery\">近一周记录</Button>\n      </div>\n    </div>\n    <div class=\"table\">\n      <i-table :columns=\"columnsData\" :data=\"addData\"></i-table>\n    </div>\n    <div class=\"modal\">\n      <div class=\"modal\">\n        <Modal v-model=\"buildIpShow\" title=\"新建封停ip\" class=\"build-ip\" @on-cancel=\"buildIpCancel\">\n          <div class=\"content\">\n            <div class=\"item\" style=\"margin-bottom: 10px\">\n              <label>ip地址（可新建多个ip，请以换行分隔！）</label>\n              <i-input placeholder=\"请输入ip地址\" type=\"textarea\" v-model=\"buildData.ip\"></i-input>\n            </div>\n            <div class=\"item\">\n              <label>备注</label>\n              <i-input placeholder=\"请输入备注\" v-model=\"buildData.remarks\"></i-input>\n            </div>\n          </div>\n          <div slot=\"footer\">\n            <Button @click=\"buildIpCancel\">重置</Button>\n            <Button type=\"primary\" @click=\"subBuildIp\">提交</Button>\n          </div>\n        </Modal>\n        <Modal v-model=\"confirmShow\" width=\"360\">\n          <p slot=\"header\" style=\"color: rgb(255, 102, 0);text-align: center\">\n            <Icon type=\"information-circled\"></Icon>\n            <span>解封确认</span>\n          </p>\n          <div style=\"text-align: center\">\n            <p>确定解封该ip?</p>\n          </div>\n          <div slot=\"footer\">\n            <Button type=\"error\" size=\"large\" long @click=\"confirmDec\">确定</Button>\n          </div>\n        </Modal>\n      </div>\n    </div>\n    <div class=\"page\">\n      <Page :total=\"pageNum\" show-elevator @on-change=\"pageChange\" v-if=\"pageShow\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\nimport util from '../.././util/index'\nexport default {\n  name: 'maunalAdmin',\n  data () {\n    return {\n      columnsData: [\n        {\n          title: '机房名称',\n          key: 'ftow_root_name'\n        },\n        {\n          title: 'ip地址',\n          key: 'ftow_key'\n        },\n        {\n          title: '备注',\n          key: 'ftow_remarks'\n        },\n        {\n          title: '操作时间',\n          key: 'ftow_time'\n        },\n        {\n          title: '操作人员',\n          key: 'ftow_user'\n        },\n        {\n          title: '操作',\n          key: 'option',\n          width: 100,\n          align: 'center',\n          render: (h, params) => {\n            return h('Button', {\n              props: {\n                type: 'error',\n                size: 'small',\n                disabled: !this.levelMess['删除']\n              },\n              on: {\n                click: () => {\n                  this.confirmClick(params)\n                }\n              }\n            }, '解封ip')\n          }\n        }\n      ],\n      idcData: [{'idc_name': '全部', 'id': ''}],\n      idc_name: '',\n      buildIpShow: false,\n      buildData: {\n        ip: '',\n        remarks: ''\n      },\n      buildInd: '',\n      levelMess: {},\n      addData: [],\n      queryIp: '',\n      idcName: '',\n      pageNum: '',\n      pageShow: false,\n      originData: '',\n      confirmShow: false,\n      confirmInd: '',\n      inter: ''\n    }\n  },\n  mounted () {\n    let levelObj = {}\n    levelObj = this.$store.state.userLevel\n    if (levelObj !== undefined) {\n      for (let i in levelObj) {\n        if (i === this.$route.name) {\n          this.levelMess = levelObj[i]\n        }\n      }\n    }\n    this.getData()\n    this.getIpData()\n    this.inter = setInterval(() => {\n      this.getIpData()\n    }, 3000)\n  },\n  methods: {\n    getData () {\n      this.$post('/webapi/public', {key: 'idc_root'})\n        .then(res => {\n          if (JSON.stringify(res) !== '{}' && res !== undefined) {\n            res.forEach((item, index) => {\n              this.idcData.push(item)\n            })\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    getIpData () {\n      let id = ''\n      let obj = {}\n      for (let i = 0; i < this.idcData.length; i++) {\n        if (this.idcName === this.idcData[i].idc_name) {\n          id = this.idcData[i].id\n        }\n      }\n      obj.ip = this.queryIp\n      obj.root_id = id\n      let chart = JSON.stringify(obj)\n      this.$post('/webapi/manualtow', {key: 'show', content: chart})\n        .then(res => {\n          this.addData = []\n          this.originData = []\n          if (JSON.stringify(res) !== '{}' && res !== undefined) {\n            res.forEach((item, index) => {\n              this.addData.push(item)\n              this.originData.push(item)\n            })\n            if (res.length > 10) {\n              this.pageNum = res.length\n              this.pageShow = true\n              this.addData = this.originData.slice(0, 10)\n            } else if (res.length <= 10) {\n              this.pageShow = false\n            }\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    },\n    buildClick () {\n      this.buildIpShow = true\n    },\n    buildIpCancel () {\n      this.buildData.ip = ''\n      this.buildData.remarks = ''\n      this.choseIdc = ''\n    },\n    confirmClick (params) {\n      this.confirmShow = true\n      this.confirmInd = params.index\n    },\n    confirmDec () {\n      let data = this.addData\n      let id = data[this.confirmInd].id\n      this.$post('/webapi/manualtow', {key: 'del', id: id})\n        .then(res => {\n          this.$Message.info('解封成功')\n          this.getIpData()\n          this.confirmShow = false\n        })\n        .catch(err => {\n          this.$Message.info('解封失败' + err)\n        })\n    },\n    subBuildIp () {\n      let ipArr = []\n      if (this.buildData.ip === '' || this.buildData.remarks === '') {\n        alert('请填写完整资料！')\n        return true\n      }\n      let regx = /[^\\d.\\s]+/g\n      if (regx.test(this.buildData.ip)) {\n        alert('两个ip地址之间用换行符分隔，请勿输入其他符号')\n        return true\n      } else {\n        ipArr = this.buildData.ip.split(/\\s/g)\n      }\n      this.$post('/webapi/manualtow', {key: 'add', ip: ipArr.join(' '), remarks: this.buildData.remarks})\n        .then(res => {\n          if (res[1] === 403) {\n            alert(res[2])\n            return true\n          }\n          this.$Message.info('添加成功')\n          this.buildIpShow = false\n          this.buildIpCancel()\n          this.getIpData()\n        })\n        .catch(err => {\n          this.$Message.info('添加失败' + err)\n        })\n    },\n    Query () {\n      if (this.idcName === '' && this.queryIp === '') {\n        alert('请输入机房名称或ip地址！')\n        return true\n      }\n      if (!util.regIp(this.queryIp) && this.queryIp !== '') {\n        alert('输入ip格式不正确！')\n        return true\n      }\n      if (this.idcName === '全部' && this.queryIp === '') {\n        alert('请输入查询IP！')\n        return true\n      }\n      this.getIpData()\n    },\n    pageChange (num) {\n      this.addData = this.originData.slice((num - 1) * 10, num * 10)\n    },\n    inpFocus () {\n      clearInterval(this.inter)\n    },\n    inpBlur () {\n      this.inter = setInterval(() => {\n        this.getIpData()\n      }, 3000)\n    },\n    hisQuery () {\n      let obj = {\n        ip: '',\n        root_id: ''\n      }\n      this.idcName = ''\n      this.queryIp = ''\n      let chart = JSON.stringify(obj)\n      this.$post('/webapi/manualtow', {key: 'show', content: chart})\n        .then(res => {\n          this.addData = []\n          this.originData = []\n          if (JSON.stringify(res) !== '{}' && res !== undefined) {\n            res.forEach((item, index) => {\n              this.addData.push(item)\n              this.originData.push(item)\n            })\n            if (res.length > 10) {\n              this.pageNum = res.length\n              this.pageShow = true\n              this.addData = this.originData.slice(0, 10)\n            } else if (res.length <= 10) {\n              this.pageShow = false\n            }\n          }\n        })\n        .catch(err => {\n          console.log(err)\n        })\n    }\n  },\n  computed: {\n    a () {\n      return this.$store.state.userLevel\n    }\n  },\n  watch: {\n    '$route' (to, from) {\n      clearInterval(this.inter)\n    },\n    a: {\n      handler: function (val) {\n        for (let i in val) {\n          if (i === this.$route.name) {\n            this.levelMess = val[i]\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .maunal-container{\n    width: 100%;\n    padding: 14px 16px;\n  }\n  .maunal-container .manual-build{\n    display: inline-block;\n    margin-bottom: 10px;\n  }\n  .query{\n    display: inline-block;\n    margin-left: 60px;\n  }\n  .query .query-ip, .query .query-idc, .query .query-btn{\n    display: inline-block;\n  }\n  .query .query-ip{\n    margin-right: 30px;\n  }\n  .query .query-idc{\n    margin-right: 30px;\n  }\n  .query .history{\n    display: inline-block;\n    margin-left: 30px;\n  }\n  .build-ip label{\n    display: inline-block;\n    padding-bottom: 8px;\n  }\n  .build-ip .item h1{\n    margin: 10px 0 8px 0;\n    font-size: 12px;\n    font-weight: normal;\n  }\n  .table{\n    margin-bottom: 150px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/maunal-admin/maunalAdmin.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"maunal-container\"},[_c('div',{staticClass:\"manual-build\"},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-plus-empty\",\"disabled\":!_vm.levelMess['新建']},on:{\"click\":_vm.buildClick}},[_vm._v(\"新建封停ip\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"query\"},[_c('div',{staticClass:\"query-idc\"},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择机房名称\"},model:{value:(_vm.idcName),callback:function ($$v) {_vm.idcName=$$v},expression:\"idcName\"}},_vm._l((_vm.idcData),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.idc_name}},[_vm._v(_vm._s(item.idc_name))])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"query-ip\"},[_c('i-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入查询ip\"},on:{\"on-focus\":_vm.inpFocus,\"on-blur\":_vm.inpBlur},model:{value:(_vm.queryIp),callback:function ($$v) {_vm.queryIp=$$v},expression:\"queryIp\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"query-btn\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.Query}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"history\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.hisQuery}},[_vm._v(\"近一周记录\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('i-table',{attrs:{\"columns\":_vm.columnsData,\"data\":_vm.addData}})],1),_vm._v(\" \"),_c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal\"},[_c('Modal',{staticClass:\"build-ip\",attrs:{\"title\":\"新建封停ip\"},on:{\"on-cancel\":_vm.buildIpCancel},model:{value:(_vm.buildIpShow),callback:function ($$v) {_vm.buildIpShow=$$v},expression:\"buildIpShow\"}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"item\",staticStyle:{\"margin-bottom\":\"10px\"}},[_c('label',[_vm._v(\"ip地址（可新建多个ip，请以换行分隔！）\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":\"请输入ip地址\",\"type\":\"textarea\"},model:{value:(_vm.buildData.ip),callback:function ($$v) {_vm.$set(_vm.buildData, \"ip\", $$v)},expression:\"buildData.ip\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('label',[_vm._v(\"备注\")]),_vm._v(\" \"),_c('i-input',{attrs:{\"placeholder\":\"请输入备注\"},model:{value:(_vm.buildData.remarks),callback:function ($$v) {_vm.$set(_vm.buildData, \"remarks\", $$v)},expression:\"buildData.remarks\"}})],1)]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{on:{\"click\":_vm.buildIpCancel}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.subBuildIp}},[_vm._v(\"提交\")])],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"width\":\"360\"},model:{value:(_vm.confirmShow),callback:function ($$v) {_vm.confirmShow=$$v},expression:\"confirmShow\"}},[_c('p',{staticStyle:{\"color\":\"rgb(255, 102, 0)\",\"text-align\":\"center\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('Icon',{attrs:{\"type\":\"information-circled\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"解封确认\")])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('p',[_vm._v(\"确定解封该ip?\")])]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"error\",\"size\":\"large\",\"long\":\"\"},on:{\"click\":_vm.confirmDec}},[_vm._v(\"确定\")])],1)])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"page\"},[(_vm.pageShow)?_c('Page',{attrs:{\"total\":_vm.pageNum,\"show-elevator\":\"\"},on:{\"on-change\":_vm.pageChange}}):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1bf0622f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/maunal-admin/maunalAdmin.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1bf0622f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./maunalAdmin.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./maunalAdmin.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./maunalAdmin.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1bf0622f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./maunalAdmin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1bf0622f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/maunal-admin/maunalAdmin.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}